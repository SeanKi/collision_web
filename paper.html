<!DOCTYPE html>
<html>
<head>
<!-- Load the Paper.js library -->
<script type="text/javascript" src="js/paper-full.js"></script>
<!-- Define inlined PaperScript associate it with myCanvas -->
<script type="text/paperscript" canvas="myCanvas">
    var circlePath = new Path.Circle(new Point(50, 50), 5);
    circlePath.fillColor = 'black'

    var circlePath1 = new Path.Circle(new Point(150, 100), 5);
    circlePath1.fillColor = 'black'

    var path = new Path.Rectangle(new Point(50, 50), new Size(100, 50));
    path.style = {
        fillColor: 'white',
        strokeColor: 'black'
    };

    var pathBound = new Path.Rectangle(new Point(1, 1), new Size(390, 290));
    pathBound.style = {
        fillColor: null,
        strokeColor: 'black'
    };

    // Create a copy of the path and set its stroke color to red:
    // var copy = path.clone();
    // copy.strokeColor = 'red';

    var copy1 = path.clone();
    copy1.strokeColor = 'blue';

    var off = {x:20, y:20};

    var rot_dir = 0;

    var circlePath2 = new Path.Circle(new Point(50 + off.x, 50 + off.y), 5);
    circlePath2.fillColor = 'blue'

    function onKeyDown(event) {
        // When a key is pressed, set the content of the text item:
        if (event.key == 'left')
            rot_dir = -1;
        else if (event.key == 'right')
            rot_dir = 1;
        if (event.key == 'a')
            off.x--;
        if (event.key == 'd')
            off.x++;
        if (event.key == 'w')
            off.y--;
        if (event.key == 's')
            off.y++;
        // console.log(off)
    }
    function onKeyUp(event) {
        rot_dir = 0;
    }

    var intersected_ = false;
    function onFrame(event) {
        // Each frame, rotate the copy by 1 degree:
        // copy.rotate(1);
        copy1.rotate(rot_dir, new Point(50 + off.x, 50 + off.y));
        var intersected = copy1.intersects(pathBound);
        if (intersected_ != intersected) {
            console.log("intersected " + intersected);
            intersected_ = intersected;
        }
        circlePath2.position = new Point(50 + off.x, 50 + off.y);
    }

</script>
</head>
<body>
	<canvas id="myCanvas"  width="400" height="400"></canvas>
</body>
</html>